<app-page-header title="Omiljeni biznisi" />
<section class="favorites">

  @if (loading()) {
    <div class="favorites__loading">
      <app-spinner size="md" />
    </div>
  } @else if (favorites().length === 0) {
    <app-empty-state
      icon="❤️"
      title="Nema omiljenih biznisa"
      message="Biznisi koje označite kao omiljene će se pojaviti ovde"
    />
  } @else {
    <div class="favorites__list">
      @for (biz of favorites(); track biz.id) {
        <div
          class="favorites__card"
          (click)="goToBusiness(biz.id)"
          (keydown.enter)="goToBusiness(biz.id)"
          tabindex="0"
          role="button"
          [attr.aria-label]="'Otvori profil biznisa ' + biz.name"
        >
          <div class="favorites__avatar">
            @if (biz.logoUrl) {
              <img [src]="biz.logoUrl" [alt]="biz.name" />
            } @else {
              {{ biz.name.charAt(0) }}
            }
          </div>
          <div class="favorites__info">
            <strong>{{ biz.name }}</strong>
            <span class="favorites__meta">{{ biz.category }} · {{ biz.address }}</span>
            <span class="favorites__stats">
              {{ biz.activeDiscountsCount }} aktivnih popusta · {{ biz.followersCount }} pratilaca
            </span>
          </div>
          <svg class="favorites__chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <polyline points="9 18 15 12 9 6" />
          </svg>
        </div>
      }
    </div>
  }
</section>
