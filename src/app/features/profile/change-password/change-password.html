<section class="change-password">
  <div class="change-password__header">
    <app-back-button />
    <h1>Promeni lozinku</h1>
  </div>

  @if (error()) {
    <div class="auth-error">{{ error() }}</div>
  }

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="change-password__form">
    <div class="form-group">
      <label for="currentPassword">Trenutna lozinka</label>
      <input id="currentPassword" type="password" formControlName="currentPassword" />
      @if (form.controls.currentPassword.touched && form.controls.currentPassword.errors) {
        <span class="error-message">Unesite trenutnu lozinku</span>
      }
    </div>

    <div class="form-group">
      <label for="newPassword">Nova lozinka</label>
      <input id="newPassword" type="password" formControlName="newPassword" />
      @if (form.controls.newPassword.touched && form.controls.newPassword.errors?.['minlength']) {
        <span class="error-message">Minimum 8 karaktera</span>
      }
    </div>

    <div class="form-group">
      <label for="confirmPassword">Potvrdi novu lozinku</label>
      <input id="confirmPassword" type="password" formControlName="confirmPassword" />
      @if (form.controls.confirmPassword.touched && form.controls.confirmPassword.errors?.['passwordMismatch']) {
        <span class="error-message">Lozinke se ne poklapaju</span>
      }
    </div>

    <button type="submit" class="btn-primary change-password__submit" [disabled]="loading()">
      @if (loading()) {
        <app-spinner size="sm" />
      } @else {
        Promeni lozinku
      }
    </button>
  </form>
</section>
